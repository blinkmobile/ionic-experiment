!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var i=e.slice(1),n=t[e[0]];return function(t,e,s){n.apply(this,[t,e,s].concat(i))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";var n=i(2);i(4),n.run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])},function(t,e,i){var n=i(3),s=n.module("app",["ionic","nemLogging","ui-leaflet"]);t.exports=s},function(t,e){t.exports=angular},function(t,e,i){var n=i(2);i(5),i(11),i(15),i(16),n.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("home",{controller:i(21),controllerAs:"ctrl",url:"/",template:i(21).tpl}),t.state("inspections",{controller:i(25),controllerAs:"ctrl",url:"^/inspections",template:i(25).tpl}),t.state("inspections-closest",{controller:i(27),url:"/inspections/closest",template:i(27).tpl}),t.state("inspectionDetail",{controller:i(29),controllerAs:"ctrl",url:"/inspections/:inspection",template:i(29).tpl}),t.state("inspectionForm",{controller:i(33),controllerAs:"ctrl",url:"/inspections/:inspection/inspect",template:i(33).tpl}),t.state("inspections-map",{controller:i(37),controllerAs:"ctrl",url:"/inspections/map",template:i(37).tpl}),t.state("pending",{url:"/pending",template:i(39)})}])},function(t,e,i){var n=i(2),s=["Unsanitary","Incorrect","Pest infestation","Dangerous","Other"];n.component("failInput",{bindings:{value:"="},controller:function(){this.styles=i(6),this.reasons=s,-1===this.reasons.indexOf(this.value)?(this.other=this.value,this.select="Other"):(this.select=this.value,this.other="")},template:i(10)})},[40,7],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,"",""]),e.locals={component:"component-3UkvmhQl"}},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(n[o]=!0)}for(s=0;s<e.length;s++){var r=e[s];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(t,e,i){function n(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=f[n.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](n.parts[o]);for(;o<n.parts.length;o++)s.parts.push(l(n.parts[o],e))}else{for(var r=[],o=0;o<n.parts.length;o++)r.push(l(n.parts[o],e));f[n.id]={id:n.id,refs:1,parts:r}}}}function s(t){for(var e=[],i={},n=0;n<t.length;n++){var s=t[n],o=s[0],r=s[1],a=s[2],c=s[3],l={css:r,media:a,sourceMap:c};i[o]?i[o].parts.push(l):e.push(i[o]={id:o,parts:[l]})}return e}function o(t,e){var i=h(),n=y[y.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function c(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var i,n,s;if(e.singleton){var o=b++;i=g||(g=a(e)),n=p.bind(null,i,o,!1),s=p.bind(null,i,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=c(e),n=u.bind(null,i),s=function(){r(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),n=d.bind(null,i),s=function(){r(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}function p(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=x(e,s);else{var o=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function d(t,e){var i=e.css,n=e.media;e.sourceMap;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function u(t,e){var i=e.css,n=(e.media,e.sourceMap);n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var s=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}var f={},v=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=v(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=v(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=s(t);return n(i,e),function(t){for(var o=[],r=0;r<i.length;r++){var a=i[r],c=f[a.id];c.refs--,o.push(c)}if(t){var l=s(t);n(l,e)}for(var r=0;r<o.length;r++){var c=o[r];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete f[c.id]}}}};var x=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports='<label class="item item-input item-select"><span class=input-label>Reason for failure</span><select ng-model=failInput.select ng-options="r for r in failInput.reasons"></select></label><label ng-if="failInput.select == \'Other\'" class="item item-input item-stacked-label"><input placeholder="Other reason" ng-model="failInput.other"></label>'},function(t,e,i){var n=i(2);n.component("inspectionItem",{bindings:{inspection:"="},controller:function(){this.styles=i(12)},template:i(14)})},[40,13],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,".name-3VsRt99F,.summary-3vvLShvi{margin-bottom:5px}.summary-3vvLShvi{display:inline-block}.summary-3vvLShvi>dd,.summary-3vvLShvi>dt{display:inline-block;margin-right:.5em}@media (max-width:30em){.summary-3vvLShvi{display:block}}",""]),e.locals={component:"component-1qHSK-W0",name:"name-3VsRt99F",summary:"summary-3vvLShvi"}},function(t,e){t.exports="<div class={{inspectionItem.styles.component}}><h2 class={{inspectionItem.styles.name}}>{{inspectionItem.inspection.business}}</h2><dl class={{inspectionItem.styles.summary}}><dt>Inspection due<dd>{{inspectionItem.inspection.date}}</dl><dl class={{inspectionItem.styles.summary}}><dt>Previous rating<dd>{{inspectionItem.inspection.previousresult}}</dl></div>"},function(t,e,i){var n=i(2);n.service("InspectionsSvc",["$http",function(t){var e="https://blinkm.co/_api/interaction/run/trial/getjobs/?action=list&key=798d6ae09c69cd3955338eb8511a12550853149c&userid=1";return{inspections:[{address:"125 Donnison St",business:"Jimmy's Cafe",colour:"CC0000",date:"21 Nov 2014",form:"sitehistory",latlong:"-33.427164,151.342995",postcode:"2250",previousresult:"Passed",state:"NSW",status:"Overdue",suburb:"Gosford",totals:"2"}],findInspection:function(t){var e=this.inspections.filter(function(e){var i,n;for(i in t)if(t.hasOwnProperty(i)&&(n=t[i],e[i]!==n))return!1;return!0});return e[0]},retrieveInspections:function(){var i=this;return t.get(e).success(function(t){i.inspections=t.joblist})}}}])},function(t,e,i){var n=i(2);i(11),i(17),n.component("inspectionsList",{bindings:{inspections:"=",search:"=",status:"="},controller:function(){this.styles=i(18)},template:i(20)})},function(t,e,i){var n=i(2);n.filter("inspection_status",function(){return function(t,e){return t.filter(function(t){return t.status===e})}}),n.filter("inspection_search",function(){return function(t,e){return e&&e.trim()?t.filter(function(t){var i=!1;return Object.keys(t).forEach(function(n){var s=(""+t[n]).toLowerCase();-1!==s.indexOf(e.toLowerCase())&&(i=!0)}),i}):t}})},[40,19],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,".divider-3vcTtosh.Normal-3WDAtD11{color:#fff;background-color:#6c3}.divider-3vcTtosh.Overdue-2UEnYIbA{color:#fff;background-color:#c00}.divider-3vcTtosh.Urgent-3N-_BWBm{color:#fff;background-color:#f93}.counter-3zO28oZG{float:right}",""]),e.locals={component:"component-1qyj2HOE",divider:"divider-3vcTtosh",Normal:"Normal-3WDAtD11",Overdue:"Overdue-2UEnYIbA",Urgent:"Urgent-3N-_BWBm",counter:"counter-3zO28oZG"}},function(t,e){t.exports='<div ng-if="(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length" class={{inspectionsList.styles.component}}><div class="item item-divider {{inspectionsList.styles.divider}} {{inspectionsList.styles[inspectionsList.status]}}">Overdue <span class={{inspectionsList.styles.counter}}>{{(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length}}</span></div><div class=item ng-repeat="inspection in (inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search) track by inspection.business"><inspection-item inspection=inspection ui-sref="inspectionDetail({ inspection: inspection.business })"></div></div>'},function(t,e,i){t.exports=function(){this.styles=i(22)},t.exports.tpl=i(24)},[41,23],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,".heading-JhpQT_6p{font-size:large;text-align:center}h1.heading-JhpQT_6p{margin:1em auto}",""]),e.locals={heading:"heading-JhpQT_6p"}},function(t,e){t.exports='<ion-view view-title=Home hide-back-button=true><ion-content><h1 class={{ctrl.styles.heading}}>Work Safety and Premises Inspection</h1><div class="list list-inset"><a class="item item-icon-left" ui-sref=inspections><i class="icon ion-ios-paper"></i> Premises Inspections</a> <a class="item item-icon-left" ui-sref=pending><i class="icon ion-ios-filing"></i> Pending Forms</a></div></ion-content></ion-view>'},function(t,e,i){i(15),i(16),t.exports=["$scope","InspectionsSvc",function(t,e){var i=this;this.inspections=e.inspections,this.search="",e.retrieveInspections().then(function(){i.inspections=e.inspections})}],t.exports.tpl=i(26)},function(t,e){t.exports='<ion-view view-title=Inspections hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p>Please select a site to begin inspection, or</p><p><button class="button button-positive" ui-sref=inspections-map>View Jobs on Map</button></p></div></div><div class="list list-inset"><div class="item item-input-inset"><label class=item-input-wrapper><input type=search placeholder=search title=search ng-model="ctrl.search"></label></div><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Overdue\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Urgent\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Normal\'"></inspections-list></div></ion-content></ion-view>'},function(t,e,i){t.exports=function(){},t.exports.tpl=i(28)},function(t,e){t.exports='<ion-view view-title="Closest Inspection" hide-back-button=false><ion-content><h1>Closest Inspection</h1></ion-content></ion-view>'},function(t,e,i){i(15),t.exports=["$stateParams","InspectionsSvc",function(t,e){this.styles=i(30),this.inspection=e.findInspection({business:t.inspection})}],t.exports.tpl=i(32)},[41,31],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,".view-iY3DTwQz{text-align:center}.heading-2fkZk-th{font-size:large;text-align:center}h1.heading-2fkZk-th{margin:1em auto}",""]),e.locals={view:"view-iY3DTwQz",heading:"heading-2fkZk-th"}},function(t,e){t.exports='<ion-view view-title="Inspection History" hide-back-button=false class={{ctrl.styles.view}}><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class="list list-inset"><div class=item><p>[insert history entries here]</p></div></div><button class="button button-positive" ui-sref="inspectionForm({ inspection: ctrl.inspection.business })">Start Inspection</button></ion-content></ion-view>'},function(t,e,i){i(15),i(5),t.exports=["$stateParams","InspectionsSvc",function(t,e){this.date=new Date,this.styles=i(34),this.inspection=e.findInspection({business:t.inspection}),this.form={foodPreparationArea:null,foodServiceArea:null,foodStorage:null},this.failReasons=["Unsanitary","Incorrect","Pest infestation","Dangerous","Other"]}],t.exports.tpl=i(36)},[41,35],function(t,e,i){e=t.exports=i(8)(),e.push([t.id,".view-3-2-9Vmk{text-align:center}.heading-G5HpGB3P{font-size:large;text-align:center}h1.heading-G5HpGB3P{margin:1em auto}",""]),e.locals={view:"view-3-2-9Vmk",heading:"heading-G5HpGB3P"}},function(t,e){t.exports='<ion-view view-title="Perform Inspection" hide-back-button=false class={{ctrl.styles.view}}><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class=card><div class="item item-text-wrap"><dl><dt>Inspector<dd>Sam Stephens<dt>Date<dd>{{ctrl.date.toLocaleDateString()}}<dt>Inspection Start Time<dd>{{ctrl.date.toLocaleTimeString()}}</dl></div></div><div class=card><div class="item item-text-wrap"><p>[insert geolocation button here]</p></div></div><h1 class={{ctrl.styles.heading}}>Inspection Areas</h1><div class=list><label class="item item-input item-stacked-label"><span class=input-label>Food Storage</span><ion-list><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodStorage == \'fail\'" value=ctrl.form.foodStorageFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Preparation Area</span><ion-list><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodPreparationArea == \'fail\'" value=ctrl.form.foodPreparationAreaFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Service Area</span><ion-list><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodServiceArea == \'fail\'" value=ctrl.form.foodServiceAreaFail></fail-input></div><h1 class={{ctrl.styles.heading}}>Inspection Summary</h1><div class=card><div class="item item-text-wrap"><p>[insert completion time field here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert completion date field here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert rating field here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert notes textarea here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert sign-off date field here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert signature capture field here]</p></div></div><div class=card><div class="item item-text-wrap"><p>[insert form controls here]</p></div></div></ion-content></ion-view>'},function(t,e,i){i(15),t.exports=["InspectionsSvc",function(t){this.markers=t.inspections.map(function(t){var e=t.latlong.split(",");return{alt:t.business,lat:parseFloat(e[0],10),lng:parseFloat(e[1],10),draggable:!1,title:t.business}}),this.center=angular.extend({zoom:10},function(t){var e=t.reduce(function(t,e){return t.lat+=e.lat,t.lng+=e.lng,t},{lat:0,lng:0});return{lat:e.lat/t.length,lng:e.lng/t.length}}(this.markers)),this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}],t.exports.tpl=i(38)},function(t,e){t.exports='<ion-view view-title="Inspections Map" hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p><button class="button button-positive" ui-sref=inspections-closest>Find Closest Job</button></p><p>Or, tap an icon for more detail</p><p>Note: maps require a good network connection</p></div></div><leaflet markers=ctrl.markers center=ctrl.center tiles=ctrl.tiles width=100% height=70vh></leaflet></ion-content></ion-view>'},function(t,e){t.exports="<ion-view view-title=Pending hide-back-button=false><ion-content><h1>Pending Jobs</h1></ion-content></ion-view>"},function(t,e,i,n){var s=i(n);"string"==typeof s&&(s=[[t.id,s,""]]);i(9)(s,{});s.locals&&(t.exports=s.locals)},function(t,e,i,n){var s=i(n);"string"==typeof s&&(s=[[t.id,s,""]]);i(9)(s,{});s.locals&&(t.exports=s.locals)}]));
//# sourceMappingURL=bundle.js.map