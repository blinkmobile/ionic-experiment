!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,s){i.apply(this,[t,e,s].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var i=n(2);n(4),i.run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])},function(t,e,n){"use strict";var i=n(3),s=i.module("app",["ionic","nemLogging","ui-leaflet"]);t.exports=s},function(t,e){t.exports=angular},function(t,e,n){"use strict";var i=n(2);n(5),n(11),n(15),n(19),n(20),i.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("home",{controller:n(25),controllerAs:"ctrl",url:"/",template:n(25).tpl}),t.state("inspections",{controller:n(29),controllerAs:"ctrl",url:"^/inspections",template:n(29).tpl}),t.state("inspections-closest",{controller:n(31),url:"/inspections/closest",template:n(31).tpl}),t.state("inspectionDetail",{controller:n(33),controllerAs:"ctrl",url:"/inspections/:inspection",template:n(33).tpl}),t.state("inspectionForm",{controller:n(37),controllerAs:"ctrl",url:"/inspections/:inspection/inspect",template:n(37).tpl}),t.state("inspections-map",{controller:n(41),controllerAs:"ctrl",url:"/inspections/map",template:n(41).tpl}),t.state("pending",{url:"/pending",template:n(43)})}])},function(t,e,n){"use strict";var i=n(2),s=["Unsanitary","Incorrect","Pest infestation","Dangerous","Other"];i.component("failInput",{bindings:{value:"="},controller:["$scope",function(t){var e=this;this.styles=n(6),this.reasons=s,-1===this.reasons.indexOf(this.value)?(this.other=this.value,this.select="Other"):(this.select=this.value,this.other=""),t.$watch(function(){return"Other"==e.select&&e.other||e.select},function(t){e.value=t})}],template:n(10)})},[44,7],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"",""]),e.locals={component:"component-3UkvmhQl"}},function(t,e){"use strict";t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(i[o]=!0)}for(s=0;s<e.length;s++){var r=e[s];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=f[i.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](i.parts[o]);for(;o<i.parts.length;o++)s.parts.push(c(i.parts[o],e))}else{for(var r=[],o=0;o<i.parts.length;o++)r.push(c(i.parts[o],e));f[i.id]={id:i.id,refs:1,parts:r}}}}function s(t){for(var e=[],n={},i=0;i<t.length;i++){var s=t[i],o=s[0],r=s[1],a=s[2],l=s[3],c={css:r,media:a,sourceMap:l};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}function o(t,e){var n=h(),i=y[y.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function c(t,e){var n,i,s;if(e.singleton){var o=b++;n=g||(g=a(e)),i=u.bind(null,n,o,!1),s=u.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),i=d.bind(null,n),s=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=p.bind(null,n),s=function(){r(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}function u(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,s);else{var o=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function p(t,e){var n=e.css,i=e.media;e.sourceMap;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e){var n=e.css,i=(e.media,e.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}var f={},m=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=m(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=s(t);return i(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var a=n[r],l=f[a.id];l.refs--,o.push(l)}if(t){var c=s(t);i(c,e)}for(var r=0;r<o.length;r++){var l=o[r];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports='<label class="item item-input item-select"><span class=input-label>Reason for failure</span><select ng-model=failInput.select ng-options="r for r in failInput.reasons"></select></label><label ng-if="failInput.select == \'Other\'" class="item item-input item-stacked-label"><input placeholder="Other reason" ng-model="failInput.other"></label>'},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),r=n(2),a=function(){function t(e,s){var r=this;i(this,t);this.$scope=e,this.$window=s,this.styles=n(12),this.geolocation=null,this.markers=[],this.center=null,this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},e.$watch(function(){return r.geolocation},function(t){r.markers=[t],r.center=o.extend({zoom:16},t)})}return t.$inject=["$scope","$window"],s(t,[{key:"update",value:function(){var t=this;this.getCurrentPosition().then(function(e){var n=e.latitude,i=e.longitude;t.geolocation={lat:n,lng:i},t.value=e,t.$scope.$digest()})}},{key:"clear",value:function(){this.geolocation=null,this.markers=[],this.center=null,this.value=null}},{key:"getCurrentPosition",value:function(){var t=this;return new Promise(function(e,n){t.$window.navigator.geolocation.getCurrentPosition(function(t){e(t.coords)},function(t){console.log(t),n(t)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})})}}]),t}();r.component("geolocation",{bindings:{value:"="},controller:a,template:n(14)})},[44,13],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"",""]),e.locals={component:"component-1esRIPEG"}},function(t,e){t.exports='<div class=card><div class="item item-text-wrap"><div class=button-bar><button class="button button-positive" ng-click=geolocation.update()>Capture location</button> <button class=button ng-click=geolocation.clear()>Clear</button></div><leaflet ng-if=geolocation.geolocation markers=geolocation.markers center=geolocation.center tiles=geolocation.tiles width=100% height=30em></leaflet></div></div>'},function(t,e,n){"use strict";var i=n(2);i.component("inspectionItem",{bindings:{inspection:"="},controller:function(){this.styles=n(16)},template:n(18)})},[44,17],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".name-3VsRt99F,.summary-3vvLShvi{margin-bottom:5px}.summary-3vvLShvi{display:inline-block}.summary-3vvLShvi>dd,.summary-3vvLShvi>dt{display:inline-block;margin-right:.5em}@media (max-width:30em){.summary-3vvLShvi{display:block}}",""]),e.locals={component:"component-1qHSK-W0",name:"name-3VsRt99F",summary:"summary-3vvLShvi"}},function(t,e){t.exports="<div class={{inspectionItem.styles.component}}><h2 class={{inspectionItem.styles.name}}>{{inspectionItem.inspection.business}}</h2><dl class={{inspectionItem.styles.summary}}><dt>Inspection due<dd>{{inspectionItem.inspection.date}}</dl><dl class={{inspectionItem.styles.summary}}><dt>Previous rating<dd>{{inspectionItem.inspection.previousresult}}</dl></div>"},function(t,e,n){"use strict";var i=n(2);i.service("InspectionsSvc",["$http",function(t){var e="https://blinkm.co/_api/interaction/run/trial/getjobs/?action=list&key=798d6ae09c69cd3955338eb8511a12550853149c&userid=1";return{inspections:[{address:"125 Donnison St",business:"Jimmy's Cafe",colour:"CC0000",date:"21 Nov 2014",form:"sitehistory",latlong:"-33.427164,151.342995",postcode:"2250",previousresult:"Passed",state:"NSW",status:"Overdue",suburb:"Gosford",totals:"2"}],findInspection:function(t){var e=this.inspections.filter(function(e){var n,i;for(n in t)if(t.hasOwnProperty(n)&&(i=t[n],e[n]!==i))return!1;return!0});return e[0]},retrieveInspections:function(){var n=this;return t.get(e).success(function(t){n.inspections=t.joblist})}}}])},function(t,e,n){"use strict";var i=n(2);n(15),n(21),i.component("inspectionsList",{bindings:{inspections:"=",search:"=",status:"="},controller:function(){this.styles=n(22)},template:n(24)})},function(t,e,n){"use strict";var i=n(2);i.filter("inspection_status",function(){return function(t,e){return t.filter(function(t){return t.status===e})}}),i.filter("inspection_search",function(){return function(t,e){return e&&e.trim()?t.filter(function(t){var n=!1;return Object.keys(t).forEach(function(i){var s=(""+t[i]).toLowerCase();-1!==s.indexOf(e.toLowerCase())&&(n=!0)}),n}):t}})},[44,23],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".divider-3vcTtosh.Normal-3WDAtD11{color:#fff;background-color:#6c3}.divider-3vcTtosh.Overdue-2UEnYIbA{color:#fff;background-color:#c00}.divider-3vcTtosh.Urgent-3N-_BWBm{color:#fff;background-color:#f93}.counter-3zO28oZG{float:right}",""]),e.locals={component:"component-1qyj2HOE",divider:"divider-3vcTtosh",Normal:"Normal-3WDAtD11",Overdue:"Overdue-2UEnYIbA",Urgent:"Urgent-3N-_BWBm",counter:"counter-3zO28oZG"}},function(t,e){t.exports='<div ng-if="(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length" class={{inspectionsList.styles.component}}><div class="item item-divider {{inspectionsList.styles.divider}} {{inspectionsList.styles[inspectionsList.status]}}">{{inspectionsList.status}} <span class={{inspectionsList.styles.counter}}>{{(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length}}</span></div><div class=item ng-repeat="inspection in (inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search) track by inspection.business"><inspection-item inspection=inspection ui-sref="inspectionDetail({ inspection: inspection.business })"></div></div>'},function(t,e,n){"use strict";t.exports=function(){this.styles=n(26)},t.exports.tpl=n(28)},[45,27],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".heading-JhpQT_6p{font-size:large;text-align:center}h1.heading-JhpQT_6p{margin:1em auto}",""]),e.locals={heading:"heading-JhpQT_6p"}},function(t,e){t.exports='<ion-view view-title=Home hide-back-button=true><ion-content><h1 class={{ctrl.styles.heading}}>Work Safety and Premises Inspection</h1><div class="list list-inset"><a class="item item-icon-left" ui-sref=inspections><i class="icon ion-ios-paper"></i> Premises Inspections</a> <a class="item item-icon-left" ui-sref=pending><i class="icon ion-ios-filing"></i> Pending Forms</a></div></ion-content></ion-view>'},function(t,e,n){"use strict";n(19),n(20),t.exports=["$scope","InspectionsSvc",function(t,e){var n=this;this.inspections=e.inspections,this.search="",e.retrieveInspections().then(function(){n.inspections=e.inspections})}],t.exports.tpl=n(30)},function(t,e){t.exports='<ion-view view-title=Inspections hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p>Please select a site to begin inspection, or</p><p><button class="button button-positive" ui-sref=inspections-map>View Jobs on Map</button></p></div></div><div class="list list-inset"><div class="item item-input-inset"><label class=item-input-wrapper><input type=search placeholder=search title=search ng-model="ctrl.search"></label></div><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Overdue\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Urgent\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Normal\'"></inspections-list></div></ion-content></ion-view>'},function(t,e,n){"use strict";t.exports=function(){},t.exports.tpl=n(32)},function(t,e){t.exports='<ion-view view-title="Closest Inspection" hide-back-button=false><ion-content><h1>Closest Inspection</h1></ion-content></ion-view>'},function(t,e,n){"use strict";n(19),t.exports=["$stateParams","InspectionsSvc",function(t,e){this.styles=n(34),this.inspection=e.findInspection({business:t.inspection})}],t.exports.tpl=n(36)},[45,35],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".view-iY3DTwQz{text-align:center}.heading-2fkZk-th{font-size:large;text-align:center}h1.heading-2fkZk-th{margin:1em auto}",""]),e.locals={view:"view-iY3DTwQz",heading:"heading-2fkZk-th"}},function(t,e){t.exports='<ion-view view-title="Inspection History" hide-back-button=false class={{ctrl.styles.view}}><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class="list list-inset"><div class=item><p>[insert history entries here]</p></div></div><button class="button button-positive" ui-sref="inspectionForm({ inspection: ctrl.inspection.business })">Start Inspection</button></ion-content></ion-view>'},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(19),n(5),n(11),t.exports=function(){function t(e,s){i(this,t),this.date=new Date,this.styles=n(38),this.inspection=s.findInspection({business:e.inspection}),this.form={foodPreparationArea:null,foodServiceArea:null,foodStorage:null,rating:0}}return t.$inject=["$stateParams","InspectionsSvc"],s(t,[{key:"discard",value:function(){console.log("InspectionFormCtrl#discard()",this)}},{key:"save",value:function(){console.log("InspectionFormCtrl#save()",this)}},{key:"submit",value:function(){console.log("InspectionFormCtrl#submit()",this)}}]),t}(),t.exports.tpl=n(40)},[45,39],function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".heading-G5HpGB3P{font-size:large;text-align:center}h1.heading-G5HpGB3P{margin:1em auto}",""]),e.locals={heading:"heading-G5HpGB3P"}},function(t,e){t.exports='<ion-view view-title="Perform Inspection" hide-back-button=false class={{ctrl.styles.view}}><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class=card><div class="item item-text-wrap"><dl><dt>Inspector<dd>Sam Stephens<dt>Date<dd>{{ctrl.date.toLocaleDateString()}}<dt>Inspection Start Time<dd>{{ctrl.date.toLocaleTimeString()}}</dl></div></div><geolocation value=ctrl.form.geolocation></geolocation><h1 class={{ctrl.styles.heading}}>Inspection Areas</h1><div class=list><label class="item item-input item-stacked-label"><span class=input-label>Food Storage</span><ion-list><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodStorage == \'fail\'" value=ctrl.form.foodStorageFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Preparation Area</span><ion-list><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodPreparationArea == \'fail\'" value=ctrl.form.foodPreparationAreaFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Service Area</span><ion-list><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodServiceArea == \'fail\'" value=ctrl.form.foodServiceAreaFail></fail-input></div><h1 class={{ctrl.styles.heading}}>Inspection Summary</h1><label class="item item-input item-stacked-label"><span class=input-label>Completion Time</span> <input type=time ng-model="ctrl.form.completionTime"></label><label class="item item-input item-stacked-label"><span class=input-label>Completion Date</span> <input type=date ng-model="ctrl.form.completionDate"></label><label class="item item-stacked-label range range-positive"><span class=input-label>Rating</span> <input type=range min=0 max=5 ng-model="ctrl.form.rating"></label><label class="item item-input item-stacked-label"><span class=input-label>Notes</span><textarea ng-model=ctrl.form.notes></textarea></label><label class="item item-input item-stacked-label"><span class=input-label>Sign-Off Date</span> <input type=date ng-model="ctrl.form.signoffDate"></label><div class=card><div class="item item-text-wrap"><p>[insert signature capture field here]</p></div></div><div class=button-bar><button class="button button-positive" ng-click=ctrl.save()>Save</button> <button class=button ng-click=ctrl.discard()>Discard</button> <button class="button button-balanced" ng-click=ctrl.submit()>Submit</button></div></ion-content></ion-view>'},function(t,e,n){"use strict";n(19),t.exports=["InspectionsSvc",function(t){this.markers=t.inspections.map(function(t){var e=t.latlong.split(",");return{alt:t.business,lat:parseFloat(e[0],10),lng:parseFloat(e[1],10),draggable:!1,title:t.business}}),this.center=angular.extend({zoom:10},function(t){var e=t.reduce(function(t,e){return t.lat+=e.lat,t.lng+=e.lng,t},{lat:0,lng:0});return{lat:e.lat/t.length,lng:e.lng/t.length}}(this.markers)),this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}],t.exports.tpl=n(42)},function(t,e){t.exports='<ion-view view-title="Inspections Map" hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p><button class="button button-positive" ui-sref=inspections-closest>Find Closest Job</button></p><p>Or, tap an icon for more detail</p><p>Note: maps require a good network connection</p></div></div><leaflet markers=ctrl.markers center=ctrl.center tiles=ctrl.tiles width=100% height=70vh></leaflet></ion-content></ion-view>'},function(t,e){t.exports="<ion-view view-title=Pending hide-back-button=false><ion-content><h1>Pending Jobs</h1></ion-content></ion-view>"},function(t,e,n,i){var s=n(i);"string"==typeof s&&(s=[[t.id,s,""]]);n(9)(s,{});s.locals&&(t.exports=s.locals)},function(t,e,n,i){var s=n(i);"string"==typeof s&&(s=[[t.id,s,""]]);n(9)(s,{});s.locals&&(t.exports=s.locals)}]));
//# sourceMappingURL=bundle.js.map