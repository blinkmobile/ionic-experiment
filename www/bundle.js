!function(t){function i(s){if(n[s])return n[s].exports;var e=n[s]={exports:{},id:s,loaded:!1};return t[s].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var n={};return i.m=t,i.c=n,i.p="",i(0)}([function(t,i,n){t.exports=n(1)},function(t,i,n){"use strict";var s=n(2);n(4),s.run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])},function(t,i,n){var s=n(3),e=s.module("app",["ionic","nemLogging","ui-leaflet"]);t.exports=e},function(t,i){t.exports=angular},function(t,i,n){var s=n(2);n(5),n(7),n(8),s.config(["$stateProvider","$urlRouterProvider",function(t,i){i.otherwise("/"),t.state("home",{url:"/",template:n(11)}),t.state("inspections",{controller:n(12),controllerAs:"ctrl",url:"^/inspections",template:n(12).tpl}),t.state("inspections-closest",{controller:n(14),url:"/inspections/closest",template:n(14).tpl}),t.state("inspection",{"abstract":!0,url:"/inspection",template:"<ui-view />"}),t.state("inspection.detail",{controller:n(16),controllerAs:"ctrl",url:"/:inspection",template:n(16).tpl}),t.state("inspections-map",{controller:n(18),controllerAs:"ctrl",url:"/inspections/map",template:n(18).tpl}),t.state("pending",{url:"/pending",template:n(20)})}])},function(t,i,n){var s=n(2);s.component("inspectionItem",{bindings:{inspection:"="},template:n(6)})},function(t,i){t.exports="<div class=bm-inspectionitem><h2 class=bm-inspectionitem__bm-name>{{inspectionItem.inspection.business}}</h2><dl class=bm-inspectionitem__bm-summary><dt>Inspection due<dd>{{inspectionItem.inspection.date}}</dl><dl class=bm-inspectionitem__bm-summary><dt>Previous rating<dd>{{inspectionItem.inspection.previousresult}}</dl></div>"},function(t,i,n){var s=n(2);s.service("InspectionsSvc",["$http",function(t){var i="https://blinkm.co/_api/interaction/run/trial/getjobs/?action=list&key=798d6ae09c69cd3955338eb8511a12550853149c&userid=1";return{inspections:[{address:"125 Donnison St",business:"Jimmy's Cafe",colour:"CC0000",date:"21 Nov 2014",form:"sitehistory",latlong:"-33.427164,151.342995",postcode:"2250",previousresult:"Passed",state:"NSW",status:"Overdue",suburb:"Gosford",totals:"2"}],findInspection:function(t){var i=this.inspections.filter(function(i){var n,s;for(n in t)if(t.hasOwnProperty(n)&&(s=t[n],i[n]!==s))return!1;return!0});return i[0]},retrieveInspections:function(){var n=this;return t.get(i).success(function(t){n.inspections=t.joblist})}}}])},function(t,i,n){var s=n(2);n(5),n(9),s.component("inspectionsList",{bindings:{inspections:"=",search:"=",status:"="},template:n(10)})},function(t,i,n){var s=n(2);s.filter("inspection_status",function(){return function(t,i){return t.filter(function(t){return t.status===i})}}),s.filter("inspection_search",function(){return function(t,i){return i&&i.trim()?t.filter(function(t){var n=!1;return Object.keys(t).forEach(function(s){var e=(""+t[s]).toLowerCase();-1!==e.indexOf(i.toLowerCase())&&(n=!0)}),n}):t}})},function(t,i){t.exports='<div ng-if="(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length"><div class="item item-divider bm-inspectionslist__bm-listdivider bm-inspectionslist__bm-listdivider-{{inspectionsList.status}}">Overdue <span class=bm-inspectionslist__bm-counter>{{(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length}}</span></div><div class=item ng-repeat="inspection in (inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search) track by inspection.business"><inspection-item inspection=inspection ui-sref="inspection.detail({ inspection: inspection.business })"></div></div>'},function(t,i){t.exports='<ion-view view-title=Home hide-back-button=true><ion-content><h1 class=bm-home__bm-heading>Work Safety and Premises Inspection</h1><div class="list list-inset"><a class="item item-icon-left" ui-sref=inspections><i class="icon ion-ios-paper"></i> Premises Inspections</a> <a class="item item-icon-left" ui-sref=pending><i class="icon ion-ios-filing"></i> Pending Forms</a></div></ion-content></ion-view>'},function(t,i,n){n(7),n(8),t.exports=["$scope","InspectionsSvc",function(t,i){var n=this;this.inspections=i.inspections,this.search="",i.retrieveInspections().then(function(){n.inspections=i.inspections})}],t.exports.tpl=n(13)},function(t,i){t.exports='<ion-view view-title=Inspections hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p>Please select a site to begin inspection, or</p><p><button class="button button-positive" ui-sref=inspections-map>View Jobs on Map</button></p></div></div><div class="list list-inset"><div class="item item-input-inset"><label class=item-input-wrapper><input type=search placeholder=search title=search ng-model="ctrl.search"></label></div><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Overdue\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Urgent\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Normal\'"></inspections-list></div></ion-content></ion-view>'},function(t,i,n){t.exports=function(){},t.exports.tpl=n(15)},function(t,i){t.exports='<ion-view view-title="Closest Inspection" hide-back-button=false><ion-content><h1>Closest Inspection</h1></ion-content></ion-view>'},function(t,i,n){n(7),t.exports=["$stateParams","InspectionsSvc",function(t,i){this.inspection=i.findInspection({business:t.inspection}),console.log("InspectionCtrl",this)}],t.exports.tpl=n(17)},function(t,i){t.exports="<ion-view view-title=Inspection hide-back-button=false><ion-content><h1>Inspection Detail</h1></ion-content></ion-view>"},function(t,i,n){n(7),t.exports=["InspectionsSvc",function(t){this.markers=t.inspections.map(function(t){var i=t.latlong.split(",");return{alt:t.business,lat:parseFloat(i[0],10),lng:parseFloat(i[1],10),draggable:!1,title:t.business}}),this.center=angular.extend({zoom:10},function(t){var i=t.reduce(function(t,i){return t.lat+=i.lat,t.lng+=i.lng,t},{lat:0,lng:0});return{lat:i.lat/t.length,lng:i.lng/t.length}}(this.markers)),this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}],t.exports.tpl=n(19)},function(t,i){t.exports='<ion-view view-title="Inspections Map" hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p><button class="button button-positive" ui-sref=inspections-closest>Find Closest Job</button></p><p>Or, tap an icon for more detail</p><p>Note: maps require a good network connection</p></div></div><leaflet markers=ctrl.markers center=ctrl.center tiles=ctrl.tiles width=100% height=70vh></leaflet></ion-content></ion-view>'},function(t,i){t.exports="<ion-view view-title=Pending hide-back-button=false><ion-content><h1>Pending Jobs</h1></ion-content></ion-view>"}]);
//# sourceMappingURL=bundle.js.map