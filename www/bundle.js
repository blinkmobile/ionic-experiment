!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r=n(2);n(4),r.run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])},function(e,t,n){"use strict";var r=n(3),i=r.module("app",["ionic","nemLogging","ui-leaflet"]);e.exports=i},function(e,t){e.exports=angular},function(e,t,n){"use strict";var r=n(2);n(5),n(11),n(15),n(19),n(25),n(30),r.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{controller:n(34),controllerAs:"ctrl",url:"/",template:n(34).tpl}),e.state("inspections",{controller:n(38),controllerAs:"ctrl",url:"^/inspections",template:n(38).tpl}),e.state("inspections-closest",{controller:n(40),url:"/inspections/closest",template:n(40).tpl}),e.state("inspectionDetail",{controller:n(42),controllerAs:"ctrl",url:"/inspections/:business",template:n(42).tpl}),e.state("inspectionForm",{controller:n(46),controllerAs:"ctrl",url:"/inspections/:business/inspect?uuid",template:n(46).tpl}),e.state("inspections-map",{controller:n(50),controllerAs:"ctrl",url:"/inspections/map",template:n(50).tpl}),e.state("pending",{controller:n(52),controllerAs:"ctrl",url:"/pending",template:n(52).tpl})}])},function(e,t,n){"use strict";var r=n(2),i=["Unsanitary","Incorrect","Pest infestation","Dangerous","Other"];r.component("failInput",{bindings:{value:"="},controller:["$scope",function(e){var t=this;this.styles=n(6),this.reasons=i,-1===this.reasons.indexOf(this.value)?(this.other=this.value,this.select="Other"):(this.select=this.value,this.other=""),e.$watch(function(){return"Other"==t.select&&t.other||t.select},function(e){t.value=e})}],template:n(10)})},[56,7],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,"",""]),t.locals={component:"component-3UkvmhQl"}},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(u(r.parts[o],t));p[r.id]={id:r.id,refs:1,parts:s}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],s=i[1],a=i[2],c=i[3],u={css:s,media:a,sourceMap:c};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(e,t){var n=m(),r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var o=b++;n=g||(g=a(t)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=d.bind(null,n),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=f.bind(null,n),i=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function l(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function f(e,t){var n=t.css,r=t.media;t.sourceMap;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},v=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=v(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=v(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],c=p[a.id];c.refs--,o.push(c)}if(e){var u=i(e);r(u,t)}for(var s=0;s<o.length;s++){var c=o[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete p[c.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports='<label class="item item-input item-select"><span class=input-label>Reason for failure</span><select ng-model=failInput.select ng-options="r for r in failInput.reasons"></select></label><label ng-if="failInput.select == \'Other\'" class="item item-input item-stacked-label"><input placeholder="Other reason" ng-model="failInput.other"></label>'},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),s=n(2),a=function(){function e(t,i){var s=this;r(this,e);this.$scope=t,this.$window=i,this.styles=n(12),this.geolocation=null,this.markers=[],this.center=null,this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},t.$watch(function(){return s.geolocation},function(e){s.markers=[e],s.center=o.extend({zoom:16},e)})}return e.$inject=["$scope","$window"],i(e,[{key:"update",value:function(){var e=this;this.getCurrentPosition().then(function(t){var n=t.latitude,r=t.longitude;e.geolocation={lat:n,lng:r},e.value=t,e.$scope.$digest()})}},{key:"clear",value:function(){this.geolocation=null,this.markers=[],this.center=null,this.value=null}},{key:"getCurrentPosition",value:function(){var e=this;return new Promise(function(t,n){e.$window.navigator.geolocation.getCurrentPosition(function(e){t(e.coords)},function(e){console.log(e),n(e)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})})}}]),e}();s.component("geolocation",{bindings:{value:"="},controller:a,template:n(14)})},[56,13],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,"",""]),t.locals={component:"component-1esRIPEG"}},function(e,t){e.exports='<div class=card><div class="item item-text-wrap"><div class=button-bar><button class="button button-positive" ng-click=geolocation.update()>Capture location</button> <button class=button ng-click=geolocation.clear()>Clear</button></div><leaflet ng-if=geolocation.geolocation markers=geolocation.markers center=geolocation.center tiles=geolocation.tiles width=100% height=30em></leaflet></div></div>'},function(e,t,n){"use strict";var r=n(2);r.component("inspectionItem",{bindings:{inspection:"="},controller:function(){this.styles=n(16)},template:n(18)})},[56,17],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".name-3VsRt99F,.summary-3vvLShvi{margin-bottom:5px}.summary-3vvLShvi{display:inline-block}.summary-3vvLShvi>dd,.summary-3vvLShvi>dt{display:inline-block;margin-right:.5em}@media (max-width:30em){.summary-3vvLShvi{display:block}}",""]),t.locals={component:"component-1qHSK-W0",name:"name-3VsRt99F",summary:"summary-3vvLShvi"}},function(e,t){e.exports="<div class={{inspectionItem.styles.component}}><h2 class={{inspectionItem.styles.name}}>{{inspectionItem.inspection.business}}</h2><dl class={{inspectionItem.styles.summary}}><dt>Inspection due<dd>{{inspectionItem.inspection.date}}</dl><dl class={{inspectionItem.styles.summary}}><dt>Previous rating<dd>{{inspectionItem.inspection.previousresult}}</dl></div>"},function(e,t,n){"use strict";var r=n(3),i=n(20),o=n(21),s=n(23),a=n(2);a.service("InspectionsSvc",["$http",function(e){var t="https://blinkm.co/_api/interaction/run/trial/getjobs/?action=list&key=798d6ae09c69cd3955338eb8511a12550853149c&userid=1",n="http://blinkm.co/_R_/common/3/xhr/SaveFormRecord.php?schema=3&_asid=20442&_fn=report&_action=add";return{drafts:i.createInstance({driver:[i.INDEXEDDB,i.WEBSQL],name:"Inspections",storeName:"drafts"}),inspections:[{address:"125 Donnison St",business:"Jimmy's Cafe",colour:"CC0000",date:"21 Nov 2014",form:"sitehistory",latlong:"-33.427164,151.342995",postcode:"2250",previousresult:"Passed",state:"NSW",status:"Overdue",suburb:"Gosford",totals:"2"}],findInspection:function(e){var t=this.inspections.filter(function(t){var n,r;for(n in e)if(e.hasOwnProperty(n)&&(r=e[n],t[n]!==r))return!1;return!0});return t[0]},retrieveInspections:function(){var n=this;return e.get(t).success(function(e){n.inspections=e.joblist})},submitInspection:function(t){var i=r.extend({_uuid:s.v1(),_submittedTime:(new Date).valueOf()},t);return e({method:"POST",url:n,data:o(i),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}])},function(e,t,n){/*!
	    localForage -- Offline Storage, Improved
	    Version 1.3.1
	    https://mozilla.github.io/localForage
	    (c) 2013-2015 Mozilla, Apache License 2.0
	*/
!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,function(){function e(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function i(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(d(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function o(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t]===e)return!0;return!1}var s={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},c=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],u=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],l={description:"",driver:c.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},f=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[a.WEBSQL]=!!e.openDatabase,n[a.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[a.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(){function t(e){r(this,t),this.INDEXEDDB=a.INDEXEDDB,this.LOCALSTORAGE=a.LOCALSTORAGE,this.WEBSQL=a.WEBSQL,this._defaultConfig=i({},l),this._config=i({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return t.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},t.prototype.defineDriver=function(e,t,n){var r=new Promise(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(o(e._driver))return void n(a);for(var c=u.concat("_initStorage"),l=0;l<c.length;l++){var d=c[l];if(!d||!e[d]||"function"!=typeof e[d])return void n(i)}var p=Promise.resolve(!0);"_support"in e&&(p=e._support&&"function"==typeof e._support?e._support():Promise.resolve(!!e._support)),p.then(function(n){f[r]=n,s[r]=e,t()},n)}catch(v){n(v)}});return r.then(t,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(e,t,r){var i=this,a=function(){if(o(e))switch(e){case i.INDEXEDDB:return new Promise(function(e,t){e(n(1))});case i.LOCALSTORAGE:return new Promise(function(e,t){e(n(2))});case i.WEBSQL:return new Promise(function(e,t){e(n(4))})}else if(s[e])return Promise.resolve(s[e]);return Promise.reject(new Error("Driver not found."))}();return a.then(t,r),a},t.prototype.getSerializer=function(e){var t=new Promise(function(e,t){e(n(3))});return e&&"function"==typeof e&&t.then(function(t){e(t)}),t},t.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return n.then(e,e),n},t.prototype.setDriver=function(e,t,n){function r(){o._config.driver=o.driver()}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(function(e){return o._extend(e),r(),o._ready=o._initStorage(o._config),o._ready})["catch"](t)}r();var s=new Error("No available storage method found.");return o._driverSet=Promise.reject(s),o._driverSet}var n=0;return t()}}var o=this;d(e)||(e=[e]);var s=this._getSupportedDrivers(e),a=null!==this._driverSet?this._driverSet["catch"](function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=a.then(function(){var e=s[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,r(),o._wrapLibraryMethodsWithReady(),o._initDriver=i(s)})})["catch"](function(){r();var e=new Error("No available storage method found.");return o._driverSet=Promise.reject(e),o._driverSet}),this._driverSet.then(t,n),this._driverSet},t.prototype.supports=function(e){return!!f[e]},t.prototype._extend=function(e){i(this,e)},t.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<u.length;t++)e(this,u[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),v=new p;t["default"]=v}.call("undefined"!=typeof window?window:self),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,function(){function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=I.BlobBuilder||I.MSBlobBuilder||I.MozBlobBuilder||I.WebKitBlobBuilder,i=new r,o=0;o<e.length;o+=1)i.append(e[o]);return i.getBlob(t.type)}}function n(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;t>i;i++)r[i]=e.charCodeAt(i);return n}function r(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){return 4===r.readyState?200===r.status?t({response:r.response,type:r.getResponseHeader("Content-Type")}):void n({status:r.status,response:r.response}):void 0},r.send()})}function i(t){return new Promise(function(n,i){var o=e([""],{type:"image/png"}),s=t.transaction([P],"readwrite");s.objectStore(P).put(o,"key"),s.oncomplete=function(){var e=t.transaction([P],"readwrite"),o=e.objectStore(P).get("key");o.onerror=i,o.onsuccess=function(e){var t=e.target.result,i=URL.createObjectURL(t);r(i).then(function(e){n(!(!e||"image/png"!==e.type))},function(){n(!1)}).then(function(){URL.revokeObjectURL(i)})}}})["catch"](function(){return!1})}function o(e){return"boolean"==typeof k?Promise.resolve(k):i(e).then(function(e){return k=e})}function s(e){return new Promise(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function a(t){var r=n(atob(t.data));return e([r],{type:t.type})}function c(e){return e&&e.__local_forage_encoded_blob}function u(e){function t(){return Promise.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];A||(A={});var o=A[r.name];o||(o={forages:[],db:null},A[r.name]=o),o.forages.push(this);for(var s=[],a=0;a<o.forages.length;a++){var c=o.forages[a];c!==this&&s.push(c.ready()["catch"](t))}var u=o.forages.slice(0);return Promise.all(s).then(function(){return r.db=o.db,l(r)}).then(function(e){return r.db=e,p(r,n._defaultConfig.version)?f(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<u.length;t++){var i=u[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function l(e){return d(e,!1)}function f(e){return d(e,!0)}function d(e,t){return new Promise(function(n,r){if(e.db){if(!t)return n(e.db);e.db.close()}var i=[e.name];t&&i.push(e.version);var o=x.open.apply(x,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(P)}catch(r){if("ConstraintError"!==r.name)throw r;I.console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(){r(o.error)},o.onsuccess=function(){n(o.result)}})}function p(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&I.console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function v(e,t){var n=this;"string"!=typeof e&&(I.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),s=o.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),c(e)&&(e=a(e)),t(e)},s.onerror=function(){r(s.error)}})["catch"](r)});return _(r,t),r}function h(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),s=o.openCursor(),u=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;c(r)&&(r=a(r));var i=e(r,n.key,u++);void 0!==i?t(i):n["continue"]()}else t()},s.onerror=function(){r(s.error)}})["catch"](r)});return _(r,t),r}function m(e,t,n){var r=this;"string"!=typeof e&&(I.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new Promise(function(n,i){var a;r.ready().then(function(){return a=r._dbInfo,t instanceof Blob?o(a.db).then(function(e){return e?t:s(t)}):t}).then(function(t){var r=a.db.transaction(a.storeName,"readwrite"),o=r.objectStore(a.storeName);null===t&&(t=void 0);var s=o.put(t,e);r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)}})["catch"](i)});return _(i,n),i}function g(e,t){var n=this;"string"!=typeof e&&(I.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),s=o.objectStore(i.storeName),a=s["delete"](e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}})["catch"](r)});return _(r,t),r}function b(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName),s=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}})["catch"](n)});return _(n,e),n}function y(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}})["catch"](n)});return _(n,e),n}function w(e,t){var n=this,r=new Promise(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),s=!1,a=o.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e))):void t(null)},a.onerror=function(){r(a.error)}})["catch"](r)});return _(r,t),r}function S(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),s=[];o.onsuccess=function(){var t=o.result;return t?(s.push(t.key),void t["continue"]()):void e(s)},o.onerror=function(){n(o.error)}})["catch"](n)});return _(n,e),n}function _(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var I=this,x=x||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(x){var k,A,P="local-forage-detect-blob-support",E={_driver:"asyncStorage",_initStorage:u,iterate:h,getItem:v,setItem:m,removeItem:g,clear:b,length:y,key:w,keys:S};t["default"]=E}}.call("undefined"!=typeof window?window:self),e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0,function(){function e(e){var t=this,r={};if(e)for(var i in e)r[i]=e[i];return r.keyPrefix=r.name+"/",r.storeName!==t._defaultConfig.storeName&&(r.keyPrefix+=r.storeName+"/"),t._dbInfo=r,new Promise(function(e,t){e(n(3))}).then(function(e){return r.serializer=e,Promise.resolve()})}function r(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=p.length-1;n>=0;n--){var r=p.key(n);0===r.indexOf(e)&&p.removeItem(r)}});return f(n,e),n}function i(e,t){var n=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=p.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return f(r,t),r}function o(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=p.length,s=1,a=0;o>a;a++){var c=p.key(a);if(0===c.indexOf(r)){var u=p.getItem(c);if(u&&(u=t.serializer.deserialize(u)),u=e(u,c.substring(i),s++),void 0!==u)return u}}});return f(r,t),r}function s(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=p.key(e)}catch(i){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return f(r,t),r}function a(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=p.length,r=[],i=0;n>i;i++)0===p.key(i).indexOf(e.keyPrefix)&&r.push(p.key(i).substring(e.keyPrefix.length));return r});return f(n,e),n}function c(e){var t=this,n=t.keys().then(function(e){return e.length});return f(n,e),n}function u(e,t){var n=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;p.removeItem(t.keyPrefix+e)});return f(r,t),r}function l(e,t,n){var r=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new Promise(function(i,o){var s=r._dbInfo;s.serializer.serialize(t,function(t,r){if(r)o(r);else try{p.setItem(s.keyPrefix+e,t),i(n)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&o(a),o(a)}})})});return f(i,n),i}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d=this,p=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;p=this.localStorage}catch(v){return}var h={_driver:"localStorageWrapper",_initStorage:e,iterate:o,getItem:i,setItem:l,removeItem:u,clear:r,length:c,key:s,keys:a};t["default"]=h}.call("undefined"!=typeof window?window:self),e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,function(){function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=I.BlobBuilder||I.MSBlobBuilder||I.MozBlobBuilder||I.WebKitBlobBuilder,i=new r,o=0;o<e.length;o+=1)i.append(e[o]);return i.getBlob(t.type)}}function n(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=u;e instanceof ArrayBuffer?(r=e,i+=f):(r=e.buffer,"[object Int8Array]"===n?i+=p:"[object Uint8Array]"===n?i+=v:"[object Uint8ClampedArray]"===n?i+=h:"[object Int16Array]"===n?i+=m:"[object Uint16Array]"===n?i+=b:"[object Int32Array]"===n?i+=g:"[object Uint32Array]"===n?i+=y:"[object Float32Array]"===n?i+=w:"[object Float64Array]"===n?i+=S:t(new Error("Failed to get type for BinaryArray"))),t(i+o(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=a+e.type+"~"+o(this.result);t(u+d+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),t(null,c)}}function r(t){if(t.substring(0,l)!==u)return JSON.parse(t);var n,r=t.substring(_),o=t.substring(l,_);if(o===d&&c.test(r)){var s=r.match(c);n=s[1],r=r.substring(s[0].length)}var a=i(r);switch(o){case f:return a;case d:return e([a],{type:n});case p:return new Int8Array(a);case v:return new Uint8Array(a);case h:return new Uint8ClampedArray(a);case m:return new Int16Array(a);case b:return new Uint16Array(a);case g:return new Int32Array(a);case y:return new Uint32Array(a);case w:return new Float32Array(a);case S:return new Float64Array(a);default:throw new Error("Unkown type: "+o)}}function i(e){var t,n,r,i,o,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(t=0;c>t;t+=4)n=s.indexOf(e[t]),r=s.indexOf(e[t+1]),i=s.indexOf(e[t+2]),o=s.indexOf(e[t+3]),f[u++]=n<<2|r>>4,f[u++]=(15&r)<<4|i>>2,f[u++]=(3&i)<<6|63&o;return l}function o(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=s[n[t]>>2],r+=s[(3&n[t])<<4|n[t+1]>>4],r+=s[(15&n[t+1])<<2|n[t+2]>>6],r+=s[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="~~local_forage_type~",c=/^~~local_forage_type~([^~]+)~/,u="__lfsc__:",l=u.length,f="arbf",d="blob",p="si08",v="ui08",h="uic8",m="si16",g="si32",b="ur16",y="ui32",w="fl32",S="fl64",_=l+f.length,I=this,x={serialize:n,deserialize:r,stringToBuffer:i,bufferToString:o};t["default"]=x}.call("undefined"!=typeof window?window:self),e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0,function(){function e(e){var t=this,r={db:null};if(e)for(var i in e)r[i]="string"!=typeof e[i]?e[i].toString():e[i];var o=new Promise(function(n,i){try{r.db=p(r.name,String(r.version),r.description,r.size)}catch(o){return t.setDriver(t.LOCALSTORAGE).then(function(){return t._initStorage(e)}).then(n)["catch"](i)}r.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=r,n()},function(e,t){i(t)})})});return new Promise(function(e,t){e(n(3))}).then(function(e){return r.serializer=e,o})}function r(e,t){var n=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function i(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,s=o.length,a=0;s>a;a++){var c=o.item(a),u=c.value;if(u&&(u=i.serializer.deserialize(u)),u=e(u,c.key,a+1),void 0!==u)return void t(u)}t()},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function o(e,t,n){var r=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new Promise(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var o=t,s=r._dbInfo;s.serializer.serialize(t,function(t,r){r?i(r):s.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(o)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})})})["catch"](i)});return f(i,n),i}function s(e,t){var n=this;"string"!=typeof e&&(d.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function a(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function c(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function u(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function l(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d=this,p=this.openDatabase;if(p){var v={_driver:"webSQLStorage",_initStorage:e,iterate:i,getItem:r,setItem:o,removeItem:s,clear:a,length:c,key:u,keys:l};t["default"]=v}}.call("undefined"!=typeof window?window:self),e.exports=t["default"]}])})},function(e,t,n){var r,i;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};/**
	 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
	 */
!function(o){var s=function(e){var t=[],r=/\[\]$/,i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},s=function a(e,s){var c,u,l;if(e)if(i(s))for(c=0,u=s.length;u>c;c++)r.test(e)?o(e,s[c]):a(e+"["+("object"===n(s[c])?c:"")+"]",s[c]);else if(s&&"[object Object]"===String(s))for(l in s)a(e+"["+l+"]",s[l]);else o(e,s);else if(i(s))for(c=0,u=s.length;u>c;c++)o(s[c].name,s[c].value);else for(l in s)a(l,s[l]);return t};return s("",e).join("&").replace(/%20/g,"+")};"object"===n(e)&&"object"===n(e.exports)?e.exports=s:(r=[],i=function(){return s}.apply(t,r),!(void 0!==i&&(e.exports=i)))}(void 0)}).call(t,n(22)(e))},function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=u[e])});16>i;)t[r+i++]=0;return t}function i(e,t){var n=t||0,r=c;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:p,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:h+1,u=a-v+(c-h)/1e4;if(0>u&&void 0===e.clockseq&&(s=s+1&16383),(0>u||a>v)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=a,h=c,p=s,a+=122192928e5;var l=(1e4*(268435455&a)+c)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var f=a/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var m=e.node||d,g=0;6>g;g++)o[r+g]=m[g];return t?t:i(o)}function s(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;16>s;s++)t[r+s]=o[s];return t||i(o)}for(var a=n(24),c=[],u={},l=0;256>l;l++)c[l]=(l+256).toString(16).substr(1),u[c[l]]=l;var f=a(),d=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),v=0,h=0,m=s;m.v1=o,m.v4=s,m.parse=r,m.unparse=i,e.exports=m},function(e,t){(function(t){"use strict";var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(2);n(15),n(26),r.component("inspectionsList",{bindings:{inspections:"=",search:"=",status:"="},controller:function(){this.styles=n(27)},template:n(29)})},function(e,t,n){"use strict";var r=n(2);r.filter("inspection_status",function(){return function(e,t){return e.filter(function(e){return e.status===t})}}),r.filter("inspection_search",function(){return function(e,t){return t&&t.trim()?e.filter(function(e){var n=!1;return Object.keys(e).forEach(function(r){var i=(""+e[r]).toLowerCase();-1!==i.indexOf(t.toLowerCase())&&(n=!0)}),n}):e}})},[56,28],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".divider-3vcTtosh.Normal-3WDAtD11{color:#fff;background-color:#6c3}.divider-3vcTtosh.Overdue-2UEnYIbA{color:#fff;background-color:#c00}.divider-3vcTtosh.Urgent-3N-_BWBm{color:#fff;background-color:#f93}.counter-3zO28oZG{float:right}",""]),t.locals={component:"component-1qyj2HOE",divider:"divider-3vcTtosh",Normal:"Normal-3WDAtD11",Overdue:"Overdue-2UEnYIbA",Urgent:"Urgent-3N-_BWBm",counter:"counter-3zO28oZG"}},function(e,t){e.exports='<div ng-if="(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length" class={{inspectionsList.styles.component}}><div class="item item-divider {{inspectionsList.styles.divider}} {{inspectionsList.styles[inspectionsList.status]}}">{{inspectionsList.status}} <span class={{inspectionsList.styles.counter}}>{{(inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search).length}}</span></div><div class=item ng-repeat="inspection in (inspectionsList.inspections | inspection_status:inspectionsList.status | inspection_search:inspectionsList.search) track by inspection.business"><inspection-item inspection=inspection ui-sref="inspectionDetail({ business: inspection.business })"></div></div>'},function(e,t,n){"use strict";var r=n(2);r.component("pendingItem",{bindings:{pending:"="},controller:function(){this.styles=n(31),this.date=new Date(this.pending.date)},template:n(33)})},[56,32],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".summary-xtGCwlco{margin:0}",""]),t.locals={component:"component-3OEYSMgg",summary:"summary-xtGCwlco"}},function(e,t){e.exports="<div class={{pendingItem.styles.component}}><h2 class={{pendingItem.styles.name}}>{{pendingItem.pending.business}}</h2><dl class={{pendingItem.styles.summary}}><dt>Job Started<dd>{{pendingItem.date.toLocaleString()}}</dl></div>"},function(e,t,n){"use strict";e.exports=function(){this.styles=n(35)},e.exports.tpl=n(37)},[57,36],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".heading-JhpQT_6p{font-size:large;text-align:center}h1.heading-JhpQT_6p{margin:1em auto}",""]),t.locals={heading:"heading-JhpQT_6p"}},function(e,t){e.exports='<ion-view view-title=Home hide-back-button=true><ion-content><h1 class={{ctrl.styles.heading}}>Work Safety and Premises Inspection</h1><div class="list list-inset"><a class="item item-icon-left" ui-sref=inspections><i class="icon ion-ios-paper"></i> Premises Inspections</a> <a class="item item-icon-left" ui-sref=pending><i class="icon ion-ios-filing"></i> Pending Forms</a></div></ion-content></ion-view>'},function(e,t,n){"use strict";n(19),n(25),e.exports=["$ionicLoading","$scope","InspectionsSvc",function(e,t,n){var r=this;this.inspections=n.inspections,this.search="",e.show({template:"Retrieving..."}),n.retrieveInspections()["catch"](function(){return Promise.resolve()}).then(function(){r.inspections=n.inspections,e.hide()})}],e.exports.tpl=n(39)},function(e,t){e.exports='<ion-view view-title=Inspections hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p>Please select a site to begin inspection, or</p><p><button class="button button-positive" ui-sref=inspections-map>View Jobs on Map</button></p></div></div><div class="list list-inset"><div class="item item-input-inset"><label class=item-input-wrapper><input type=search placeholder=search title=search ng-model="ctrl.search"></label></div><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Overdue\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Urgent\'"></inspections-list><inspections-list inspections=ctrl.inspections search=ctrl.search status="\'Normal\'"></inspections-list></div></ion-content></ion-view>'},function(e,t,n){"use strict";e.exports=function(){},e.exports.tpl=n(41)},function(e,t){e.exports='<ion-view view-title="Closest Inspection" hide-back-button=false><ion-content><h1>Closest Inspection</h1></ion-content></ion-view>'},function(e,t,n){"use strict";n(19),e.exports=["$stateParams","InspectionsSvc",function(e,t){this.styles=n(43),this.inspection=t.findInspection({business:e.business})}],e.exports.tpl=n(45)},[57,44],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".view-iY3DTwQz{text-align:center}.heading-2fkZk-th{font-size:large;text-align:center}h1.heading-2fkZk-th{margin:1em auto}",""]),t.locals={view:"view-iY3DTwQz",heading:"heading-2fkZk-th"}},function(e,t){e.exports='<ion-view view-title="Inspection History" hide-back-button=false class={{ctrl.styles.view}}><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class="list list-inset"><div class=item><p>[insert history entries here]</p></div></div><button class="button button-positive" ui-sref="inspectionForm({ business: ctrl.inspection.business })">Start Inspection</button></ion-content></ion-view>'},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),s=n(23);n(19),n(5),n(11),e.exports=function(){function e(t,i,o,a,c){var u=this;r(this,e),this.$ionicLoading=t,this.$state=o,this.InspectionsSvc=c,this.date=new Date,this.styles=n(47),this.inspection=c.findInspection({business:a.business}),this.form={_uuid:a.uuid||s.v1(),completionDate:null,completionTime:null,foodPreparationArea:null,foodPreparationAreaFail:null,foodServiceArea:null,foodServiceAreaFail:null,foodStorage:null,foodStorageFail:null,geolocation:null,notes:null,rating:0,signoffDate:null},c.drafts.getItem(this.form._uuid).then(function(e){e&&(u.date=new Date(e.date),Object.keys(u.form).forEach(function(t){u.form[t]=e[t]}),i.$digest())})}return e.$inject=["$ionicLoading","$scope","$state","$stateParams","InspectionsSvc"],i(e,[{key:"discard",value:function(){console.log("InspectionFormCtrl#discard()",this)}},{key:"save",value:function(){console.log("InspectionFormCtrl#save()",this);var e=o.extend({date:this.date.toISOString(),business:this.inspection.business},this.form);this.InspectionsSvc.drafts.setItem(this.form._uuid,e)}},{key:"submit",value:function(){var e=this;console.log("InspectionFormCtrl#submit()",this),this.$ionicLoading.show({template:"Sending..."}),this.InspectionsSvc.submitInspection(this.form)["catch"](function(){return Promise.resolve()}).then(function(){e.$ionicLoading.hide(),e.$state.go("home")})}}]),e}(),e.exports.tpl=n(49)},[57,48],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".heading-G5HpGB3P{font-size:large;text-align:center}h1.heading-G5HpGB3P{margin:1em auto}",""]),t.locals={heading:"heading-G5HpGB3P"}},function(e,t){e.exports='<ion-view view-title="Perform Inspection" hide-back-button=false class={{ctrl.styles.view}} cache-view=false><ion-content><h1 class={{ctrl.styles.heading}}>{{ctrl.inspection.business}}</h1><div class=card><div class="item item-text-wrap"><dl><dt>Inspector<dd>Sam Stephens<dt>Date<dd>{{ctrl.date.toLocaleDateString()}}<dt>Inspection Start Time<dd>{{ctrl.date.toLocaleTimeString()}}</dl></div></div><geolocation value=ctrl.form.geolocation></geolocation><h1 class={{ctrl.styles.heading}}>Inspection Areas</h1><div class=list><label class="item item-input item-stacked-label"><span class=input-label>Food Storage</span><ion-list><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodStorage ng-model=ctrl.form.foodStorage ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodStorage == \'fail\'" value=ctrl.form.foodStorageFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Preparation Area</span><ion-list><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodPreparationArea ng-model=ctrl.form.foodPreparationArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodPreparationArea == \'fail\'" value=ctrl.form.foodPreparationAreaFail></fail-input><label class="item item-input item-stacked-label"><span class=input-label>Food Service Area</span><ion-list><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'pass\'">Pass</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'na\'">N/A</ion-radio><ion-radio name=foodServiceArea ng-model=ctrl.form.foodServiceArea ng-value="\'fail\'">Fail</ion-radio></ion-list></label><fail-input ng-if="ctrl.form.foodServiceArea == \'fail\'" value=ctrl.form.foodServiceAreaFail></fail-input></div><h1 class={{ctrl.styles.heading}}>Inspection Summary</h1><label class="item item-input item-stacked-label"><span class=input-label>Completion Time</span> <input type=time ng-model="ctrl.form.completionTime"></label><label class="item item-input item-stacked-label"><span class=input-label>Completion Date</span> <input type=date ng-model="ctrl.form.completionDate"></label><label class="item item-stacked-label range range-positive"><span class=input-label>Rating</span> <input type=range min=0 max=5 ng-model="ctrl.form.rating"></label><label class="item item-input item-stacked-label"><span class=input-label>Notes</span><textarea ng-model=ctrl.form.notes></textarea></label><label class="item item-input item-stacked-label"><span class=input-label>Sign-Off Date</span> <input type=date ng-model="ctrl.form.signoffDate"></label><div class=card><div class="item item-text-wrap"><p>[insert signature capture field here]</p></div></div><div class=button-bar><button class="button button-positive" ng-click=ctrl.save()>Save</button> <button class=button ng-click=ctrl.discard()>Discard</button> <button class="button button-balanced" ng-click=ctrl.submit()>Submit</button></div></ion-content></ion-view>'},function(e,t,n){"use strict";n(19),e.exports=["InspectionsSvc",function(e){this.markers=e.inspections.map(function(e){var t=e.latlong.split(",");return{alt:e.business,lat:parseFloat(t[0],10),lng:parseFloat(t[1],10),draggable:!1,title:e.business}}),this.center=angular.extend({zoom:10},function(e){var t=e.reduce(function(e,t){return e.lat+=t.lat,e.lng+=t.lng,e},{lat:0,lng:0});return{lat:t.lat/e.length,lng:t.lng/e.length}}(this.markers)),this.tiles={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}],e.exports.tpl=n(51)},function(e,t){e.exports='<ion-view view-title="Inspections Map" hide-back-button=false><ion-content><div class="card bm-instructions"><div class="item item-test-wrap"><p><button class="button button-positive" ui-sref=inspections-closest>Find Closest Job</button></p><p>Or, tap an icon for more detail</p><p>Note: maps require a good network connection</p></div></div><leaflet markers=ctrl.markers center=ctrl.center tiles=ctrl.tiles width=100% height=70vh></leaflet></ion-content></ion-view>'},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(19),n(30),e.exports=["$scope","InspectionsSvc",function i(e,t){var o=this;r(this,i),this.styles=n(53),this.drafts=[],t.drafts.iterate(function(e){o.drafts.push(e)},function(){e.$digest()})}],e.exports.tpl=n(55)},[57,54],function(e,t,n){t=e.exports=n(8)(),t.push([e.id,".heading-3-HY4qwT{font-size:large;text-align:center}h1.heading-3-HY4qwT{margin:1em auto}",""]),t.locals={heading:"heading-3-HY4qwT"}},function(e,t){e.exports='<ion-view view-title=Pending hide-back-button=false cache-view=false><ion-content><h1 class={{ctrl.styles.heading}}>Draft Jobs</h1><div class=list ng-if=ctrl.drafts.length><div class=item ng-repeat="draft in ctrl.drafts track by draft._uuid" ui-sref="inspectionForm({ business: draft.business, uuid: draft._uuid })"><pending-item pending="draft"></div></div><p ng-if=!ctrl.drafts.length>There are no saved drafts.</p></ion-content></ion-view>'},function(e,t,n,r){var i=n(r);"string"==typeof i&&(i=[[e.id,i,""]]);n(9)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n,r){var i=n(r);"string"==typeof i&&(i=[[e.id,i,""]]);n(9)(i,{});i.locals&&(e.exports=i.locals)}]));
//# sourceMappingURL=bundle.js.map